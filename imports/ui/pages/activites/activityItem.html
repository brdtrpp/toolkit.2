<template name="activityItem">
  <div class="panel-group" id="accordion{{_id}}" role="tablist" aria-multiselectable="true">
    <div class="panel panel-info">
      <div class="panel-heading">
        <h4 class="panel-title" role="button" id="{{_id}}" data-toggle="collapse" data-parent="#accordion" href="#collapse{{_id}}" aria-expanded="true" aria-controls="collapse{{_id}}">
          <a>{{name}}</a>
          <div class='pull-right'>${{rollup}}
            <div class="btn-group">
              <a type="button" class="dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="glyphicon glyphicon-option-vertical"></span>
              </a>
              <ul class="dropdown-menu dropdown-menu-right">
                <li><a href="#" class="clone-activity"><span class="glyphicon glyphicon-repeat"></span> Clone</a></li>
                <li><a href="#"><span class="glyphicon glyphicon-pencil"></span> Edit</a></li>
                <li><a href="#" class="delete-activity"><span class="glyphicon glyphicon-trash"></span> Delete</a></li>
              </ul>
            </div>
          </div>
        </h4>
      </div>
      <div id="collapse{{_id}}" class="panel-collapse collapse" role="tabpanel" aria-labelledby="heading{{_id}}">
        <div class="panel-body">

            {{#each subactivity}}
              {{> subactivityItem}}
            {{/each}}

              <div class="collapse" id="insertSubactivityFormWell">
                <div class="well">
                {{#autoForm collection="Subactivities" id="insertSubactivityForm" type="insert"}}
                  <fieldset>
                    <h3>Add a Subactivity to {{name}}</h3>
                    {{> afQuickField name='name'}}
                    {{> afQuickField name='duration'}}
                    {{> afQuickField name='downtime'}}
                    {{> afQuickField name='rate'}}
                    {{> afQuickField name='people'}}
                    {{> afQuickField name='consumable'}}
                    {{> afQuickField name='itemCost'}}
                    {{> afQuickField name='itemNum'}}
                  </fieldset>
                  <button type="submit" class="btn btn-success btn-block activity">Create Subactivity</button>
                {{/autoForm}}
              </div>
            </div>
          <button class="btn btn-warning btn-block foo" type="button" data-toggle="collapse" data-target="#insertSubactivityFormWell" aria-expanded="false" aria-controls="insert">
            Add a Subactivity to {{name}}
          </button>
        </div>
      </div>
    </div>
  </div>
</template>
